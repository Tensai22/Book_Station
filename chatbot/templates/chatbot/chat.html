{% extends 'base.html' %}

{% block title %}AI ÐšÐ½Ð¸Ð¶Ð½Ñ‹Ð¹ Ð§Ð°Ñ‚{% endblock %}

{% block content %}
    <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ -->
    <h2>ðŸ“š AI ÐšÐ½Ð¸Ð¶Ð½Ñ‹Ð¹ Ð§Ð°Ñ‚</h2>
    <div id="chat-box" class="mb-3"></div>
    <input
            type="text"
            id="userInput"
            class="form-control mb-2 text-white"
    >
    <button class="btn btn-primary" onclick="sendMessage()">ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ</button>

    <script>
        function sendMessage() {
            const input = document.getElementById("userInput");
            const message = input.value.trim();
            if (!message) return;

            const chatBox = document.getElementById("chat-box");
            chatBox.innerHTML += `<div><strong>Ð’Ñ‹:</strong> ${message}</div>`;
            input.value = "";

            fetch("/chatbot/chat/", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({message})
            })
                .then(response => response.json())
                .then(data => {
                    if (data.response) {
                        chatBox.innerHTML += `<div><strong>Ð‘Ð¾Ñ‚:</strong> ${data.response}</div>`;
                        chatBox.scrollTop = chatBox.scrollHeight;
                    }
                });
        }
    </script>
{% endblock %}
